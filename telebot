import telebot
import requests
from telebot import types

# ĞĞŸĞ˜ ĞšĞ›Ğ®Ğ§Ğ˜
api_tg = 
api_id = 

bot = telebot.TeleBot(api_tg)

# ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ
starter = (
    "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚! Ğ¯ Ñ‚Ğ²Ğ¾Ğ¹ Ğ±Ğ¾Ñ‚, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¼Ğ¾Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°: /menu"
)

schedule = (
     "8:30-9:50 Ğ£ĞºÑ€Ğ°Ğ¸Ğ½ÑĞºĞ¸Ğ¹\n"
     "9:50-11:50 ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ°"
)
# ĞšĞ½Ğ¾Ğ¿ĞºĞ¸
markup = types.ReplyKeyboardMarkup(row_width=4)
itembtn1 = types.KeyboardButton('ĞŸĞ¾Ğ³Ğ¾Ğ´Ğ°')
markup.add(itembtn1)
itembtn2 = types.KeyboardButton('Ğ Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ')
itembtn3 = types.KeyboardButton('Ñ')
markup.add(itembtn2, itembtn3)

# Start
@bot.message_handler(commands=['start'])
def send_welcome(message):
    bot.reply_to(message, starter)

@bot.message_handler(commands = ["menu"])
def send_menu(message):
    bot.reply_to(message, "ĞŸÑ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ğ» Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼ Ğ½Ğ¸Ğ¶Ğµ", reply_markup=markup)

@bot.message_handler(func=lambda message: message.text == "ĞŸĞ¾Ğ³Ğ¾Ğ´Ğ°")
def send_weather(message):
    try:
        url = f"https://api.openweathermap.org/data/2.5/weather?q=Odessa&appid={api_id}&lang=ru&units=metric"
        response = requests.get(url)
        data = response.json()
        
# ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ Ğ¾Ñ‚ ÑĞ°Ğ¹Ñ‚Ğ°
        humidity = data["main"]["humidity"]
        description = data["weather"][0]["description"].capitalize()
        temp = int(data["main"]["temp"])
        feel_like_temp = int(data["main"]["feels_like"])
        wind = int(data["wind"]["speed"])

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ°Ğ½Ğ¸Ğµ Ñ‚ĞµĞºÑÑ‚Ğ°
        text = (
    f"ğŸŒŸ **ĞŸĞ ĞĞ“ĞĞĞ— ĞŸĞĞ“ĞĞ”Ğ« Ğ’ ĞĞ”Ğ•Ğ¡Ğ¡Ğ• Ğ¡Ğ•Ğ“ĞĞ”ĞĞ¯** ğŸ™ï¸\n"
    f"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n"
    f"â˜ï¸ Ğ¡Ğ˜Ğ¢Ğ£ĞĞ¦Ğ˜Ğ¯: {description} \n\n"
    f"ğŸŒ¡ï¸ Ğ¢Ğ•ĞœĞŸĞ•Ğ ĞĞ¢Ğ£Ğ Ğ:\n"
    f"    â†’ Ğ¤Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ: {temp}Â°C\n"
    f"    â†’ ĞÑ‰ÑƒÑ‰Ğ°ĞµÑ‚ÑÑ ĞºĞ°Ğº: {feel_like_temp}Â°C\n\n"
    f"ğŸ’§ Ğ’Ğ›ĞĞ–ĞĞĞ¡Ğ¢Ğ¬: {humidity}\n"
    f"ğŸ’¨ Ğ’Ğ•Ğ¢Ğ•Ğ : Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ {wind}"
        )

        
        bot.reply_to(message, text)

    except Exception as n:
        bot.reply_to(message, "Error")
     
@bot.message_handler(commands = ["schedule"])
@bot.message_handler(func=lambda message: message.text == "Ğ Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ")
def send_schedule(message):
     bot.reply_to(message, schedule)

@bot.message_handler(func=lambda message: True)
def echo_all(message):
	bot.reply_to(message, "ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ñ‚Ğ°ĞºÑƒÑ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ, /help")

bot.polling(none_stop=True),
